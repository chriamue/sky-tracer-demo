<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>üõ©Ô∏è Sky Tracer Demo Services</title>
        <style>
            body {
                font-family:
                    system-ui,
                    -apple-system,
                    sans-serif;
                margin: 0;
                padding: 0;
                min-height: 100vh;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            }

            .container {
                width: 100%;
                max-width: 1400px;
                margin: 0 auto;
                padding: 2rem;
                padding-top: 1rem; /* Reduced top padding since h1 has margin */
            }

            h1 {
                text-align: center;
                color: #2c3e50;
                font-size: 2.5rem;
                margin: 0 0 2rem 0; /* Remove top margin, keep bottom margin */
                padding-top: 1rem; /* Add padding instead */
            }

            .services-grid {
                display: grid;
                grid-template-columns: 320px 1fr; /* Slightly wider left column */
                gap: 2rem;
                padding: 0; /* Remove padding from grid */
                height: calc(100vh - 120px); /* Set explicit height */
            }

            .service-categories {
                background: white;
                padding: 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                overflow-y: auto; /* Allow scrolling if content is too tall */
                max-height: 100%;
            }

            .service-category {
                margin-bottom: 1.5rem; /* Reduced margin */
            }

            .service-category h2 {
                color: #34495e;
                margin-top: 0;
                margin-bottom: 1rem;
                font-size: 1.1rem;
                border-bottom: 2px solid #eee;
                padding-bottom: 0.5rem;
            }

            ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            li {
                margin: 0.6rem 0; /* Slightly reduced margin */
            }

            .service-link {
                display: flex;
                align-items: center;
                padding: 0.8rem 1.2rem;
                background-color: #f8f9fa;
                color: #2c3e50;
                text-decoration: none;
                border-radius: 6px;
                transition: all 0.3s ease;
                border: 1px solid #e9ecef;
                cursor: pointer;
            }

            .service-link:hover {
                background-color: #e9ecef;
                transform: translateY(-2px);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .emoji {
                margin-right: 0.5rem;
                font-size: 1.2rem;
            }

            .preview-container {
                background: white;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                position: relative;
                height: 100%;
                display: flex;
                flex-direction: column;
            }

            .preview-header {
                padding: 1rem;
                background: #f8f9fa;
                border-bottom: 1px solid #e9ecef;
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-shrink: 0; /* Don't shrink the header */
            }

            .preview-title {
                font-weight: bold;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            .preview-actions {
                display: flex;
                gap: 0.5rem;
            }

            .preview-button {
                padding: 0.5rem 1rem;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-size: 0.9rem;
            }

            .open-external {
                background-color: #007bff;
                color: white;
            }

            .refresh-preview {
                background-color: #6c757d;
                color: white;
            }

            .preview-frame {
                width: 100%;
                height: 100%;
                border: none;
                background: white;
                transition: opacity 0.3s ease;
            }

            #preview-content {
                flex: 1; /* Take up remaining space */
                overflow: auto; /* Allow scrolling */
            }

            .no-preview {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start; /* Changed from center */
                height: 100%;
                color: #6c757d;
                text-align: center;
                padding: 2rem;
                overflow-y: auto;
            }

            .no-preview button {
                margin-top: 1rem;
            }

            .no-preview-emoji {
                font-size: 3rem; /* Reduced size */
                margin-bottom: 1rem;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.1);
                }
                100% {
                    transform: scale(1);
                }
            }

            .api-links {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
                margin-top: 0.5rem;
            }

            .api-sub-link {
                font-size: 0.9rem;
                padding: 0.4rem 0.8rem;
                background-color: rgba(0, 123, 255, 0.1);
                border-radius: 4px;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }

            .api-sub-link:hover {
                background-color: rgba(0, 123, 255, 0.2);
            }

            .mcp-endpoint {
                background: #f8f9fa;
                padding: 1rem;
                border-radius: 6px;
                margin: 0.8rem 0;
                border-left: 4px solid #007bff;
                position: relative;
            }

            .mcp-endpoint-url {
                font-family: monospace;
                font-weight: bold;
                color: #007bff;
                word-break: break-all;
                padding-right: 60px; /* Make space for copy button */
            }

            .mcp-tools {
                margin-top: 0.8rem;
                font-size: 0.9rem;
                color: #6c757d;
            }

            .copy-button {
                background: #28a745;
                color: white;
                border: none;
                padding: 0.4rem 0.8rem;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.8rem;
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                transition: background-color 0.2s ease;
            }

            .copy-button:hover {
                background: #218838;
            }

            .mcp-content {
                max-width: 100%;
                text-align: left;
            }

            .mcp-content h3 {
                margin-top: 0;
                color: #2c3e50;
            }

            .mcp-content h4 {
                color: #34495e;
                margin-top: 1.5rem;
                margin-bottom: 0.8rem;
            }

            .code-block {
                background: #f8f9fa;
                padding: 1rem;
                border-radius: 4px;
                font-size: 0.9rem;
                overflow-x: auto;
                position: relative;
                margin: 0.8rem 0;
                border: 1px solid #e9ecef;
            }

            .endpoints-grid {
                display: grid;
                gap: 0.8rem;
                margin: 1rem 0;
            }

            /* Responsive adjustments */
            @media (max-width: 1200px) {
                .services-grid {
                    grid-template-columns: 280px 1fr;
                }
            }

            @media (max-width: 768px) {
                .services-grid {
                    grid-template-columns: 1fr;
                    height: auto;
                }

                .service-categories {
                    max-height: 300px;
                }

                .preview-container {
                    height: 600px;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üõ©Ô∏è Sky Tracer Demo</h1>

            <div class="services-grid">
                <div class="service-categories">
                    <div class="service-category">
                        <h2>üìö Documentation</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/presentation/', 'üéØ Presentation')"
                                >
                                    <span class="emoji">üéØ</span>Presentation
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('http://localhost:8082/workspace/diagrams', 'üèóÔ∏è Architecture')"
                                >
                                    <span class="emoji">üèóÔ∏è</span>Architecture
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="service-category">
                        <h2>‚úàÔ∏è Core Services</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/airports', 'üè¢ Airport Anywhere')"
                                >
                                    <span class="emoji">üè¢</span>Airport
                                    Anywhere
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/airports/docs', 'üè¢ Airport API Docs')"
                                    >
                                        üìñ API Documentation
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/flights', 'üéÆ Flight Controller')"
                                >
                                    <span class="emoji">üéÆ</span>Flight
                                    Controller
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/flights/docs', 'üéÆ Flight API Docs')"
                                    >
                                        üìñ API Documentation
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/satellites', 'üõ∞Ô∏è Orbital Beacon')"
                                >
                                    <span class="emoji">üõ∞Ô∏è</span>Orbital Beacon
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/satellites/docs', 'üõ∞Ô∏è Satellite API Docs')"
                                    >
                                        üìñ API Documentation
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/babel/docs', 'üóº Tower of Babel API')"
                                >
                                    <span class="emoji">üóº</span>Tower of Babel
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/babel/docs', 'üóº Alternative Docs')"
                                    >
                                        üìñ Alternative Docs
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="service-category">
                        <h2>üìä Monitoring</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/delays/FRA', '‚è∞ Delay-O-Rama')"
                                >
                                    <span class="emoji">‚è∞</span>Delay-O-Rama
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/delays/CDG', '‚è∞ Paris CDG Delays')"
                                    >
                                        üá´üá∑ Paris CDG
                                    </div>
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/delays/LAX', '‚è∞ Los Angeles Delays')"
                                    >
                                        üá∫üá∏ Los Angeles
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/flightmare/', 'üò± Flightmare')"
                                >
                                    <span class="emoji">üò±</span>Flightmare
                                    Tracker
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/cockpit/', 'üéØ Cockpit')"
                                >
                                    <span class="emoji">üéØ</span>Cockpit
                                    Dashboard
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="service-category">
                        <h2>üîß Infrastructure</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('//localhost:8080', 'üîÑ Traefik')"
                                >
                                    <span class="emoji">üîÑ</span>Traefik
                                    Dashboard
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('//localhost:16686', 'üìä Jaeger')"
                                >
                                    <span class="emoji">üìä</span>Jaeger Tracing
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="service-category">
                        <h2>üåê Integration Hub</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/swagger-ui', 'üåü Sky Nexus API')"
                                >
                                    <span class="emoji">üåü</span>Sky Nexus API
                                </div>
                                <div class="api-links">
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/api/v1/nexus/airports', 'üè¢ Nexus Airports API')"
                                    >
                                        üè¢ Airports Endpoint
                                    </div>
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/api/v1/nexus/flights', '‚úàÔ∏è Nexus Flights API')"
                                    >
                                        ‚úàÔ∏è Flights Endpoint
                                    </div>
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/api/v1/nexus/satellites', 'üõ∞Ô∏è Nexus Satellites API')"
                                    >
                                        üõ∞Ô∏è Satellites Endpoint
                                    </div>
                                    <div
                                        class="api-sub-link"
                                        onclick="showPreview('/api/v1/nexus/datetime/current', 'üïê DateTime API')"
                                    >
                                        üïê DateTime Endpoint
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showMCPInfo('üè¢ MCP Airports')"
                                >
                                    <span class="emoji">üè¢</span>MCP Airports
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showMCPInfo('‚úàÔ∏è MCP Flights')"
                                >
                                    <span class="emoji">‚úàÔ∏è</span>MCP Flights
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showMCPInfo('üõ∞Ô∏è MCP Satellites')"
                                >
                                    <span class="emoji">üõ∞Ô∏è</span>MCP Satellites
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showMCPInfo('üïê MCP DateTime')"
                                >
                                    <span class="emoji">üïê</span>MCP DateTime
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showMCPInfo('üóº MCP Babel')"
                                >
                                    <span class="emoji">üóº</span>MCP Babel
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="service-category">
                        <h2>üß™ Testing & Examples</h2>
                        <ul>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/api/v1/babel/FRA', 'üóº Babel API Test')"
                                >
                                    <span class="emoji">üóº</span>Babel API (FRA)
                                </div>
                            </li>
                            <li>
                                <div
                                    class="service-link"
                                    onclick="showPreview('/api/v1/airports/search?code=CDG', 'üè¢ Airport Search Test')"
                                >
                                    <span class="emoji">üè¢</span>Airport Search
                                    (CDG)
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="preview-container">
                    <div class="preview-header">
                        <div class="preview-title">
                            <span id="preview-emoji"></span>
                            <span id="preview-title"
                                >Select a service to preview</span
                            >
                        </div>
                        <div class="preview-actions">
                            <button
                                class="preview-button refresh-preview"
                                onclick="refreshPreview()"
                            >
                                <span class="emoji">üîÑ</span>Refresh
                            </button>
                            <button
                                class="preview-button open-external"
                                onclick="openExternal()"
                            >
                                <span class="emoji">‚ÜóÔ∏è</span>Open External
                            </button>
                        </div>
                    </div>
                    <div id="preview-content">
                        <div class="no-preview">
                            <div class="no-preview-emoji">üëÜ</div>
                            <div>Click a service to preview</div>
                            <p
                                style="
                                    font-size: 0.9rem;
                                    margin-top: 1rem;
                                    opacity: 0.7;
                                "
                            >
                                Services with API endpoints will show live
                                data.<br />
                                MCP endpoints require special clients to access.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let currentUrl = "";

            function showPreview(url, title) {
                currentUrl = url;
                document.getElementById("preview-title").textContent = title;
                document.getElementById("preview-content").innerHTML = `
                <iframe
                    src="${url}"
                    class="preview-frame"
                    allow="fullscreen"
                ></iframe>
            `;
            }

            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(() => {
                    // Show brief feedback
                    event.target.textContent = "Copied!";
                    setTimeout(() => {
                        event.target.textContent = "Copy";
                    }, 1000);
                });
            }

            function showMCPInfo(title) {
                document.getElementById("preview-title").textContent = title;

                const mcpEndpoints = {
                    "üè¢ MCP Airports": {
                        url: "http://localhost:9093/mcp/airports",
                        tools: ["list_airports", "get_airport"],
                        description: "Access airport data and information",
                    },
                    "‚úàÔ∏è MCP Flights": {
                        url: "http://localhost:9093/mcp/flights",
                        tools: [
                            "list_flights",
                            "get_flight",
                            "create_flight",
                            "search_flights_by_route",
                        ],
                        description: "Manage flights and search flight data",
                    },
                    "üõ∞Ô∏è MCP Satellites": {
                        url: "http://localhost:9093/mcp/satellites",
                        tools: [
                            "list_satellites",
                            "create_satellite",
                            "update_satellite_status",
                            "calculate_position",
                        ],
                        description:
                            "Satellite tracking and position calculation",
                    },
                    "üïê MCP DateTime": {
                        url: "http://localhost:9093/mcp/datetime",
                        tools: [
                            "get_current_datetime",
                            "get_aviation_times",
                            "get_timezone_difference",
                        ],
                        description:
                            "Aviation-focused datetime and timezone utilities",
                    },
                    "üóº MCP Babel": {
                        url: "http://localhost:9093/mcp/babel",
                        tools: [
                            "get_flights_by_airport",
                            "get_flight_position",
                            "search_flights_by_airport_pattern",
                        ],
                        description:
                            "Real-time flight tracking and position data",
                    },
                };

                const endpoint = mcpEndpoints[title];

                document.getElementById("preview-content").innerHTML = `
                <div class="no-preview">
                    <div class="no-preview-emoji">ü§ñ</div>
                    <div style="max-width: 700px; text-align: left;">
                        <h3>Model Context Protocol (MCP) Endpoint</h3>
                        <p>${endpoint.description}</p>

                        <div class="mcp-endpoint">
                            <div class="mcp-endpoint-url">${endpoint.url}</div>
                            <button class="copy-button" onclick="copyToClipboard('${endpoint.url}')">Copy</button>
                            <div class="mcp-tools">
                                <strong>Available tools:</strong> ${endpoint.tools.join(", ")}
                            </div>
                        </div>

                        <h4>All MCP Endpoints:</h4>
                        <div style="display: grid; gap: 0.5rem; margin: 1rem 0;">
                            ${Object.entries(mcpEndpoints)
                                .map(
                                    ([name, info]) => `
                                <div class="mcp-endpoint">
                                    <div><strong>${name}</strong></div>
                                    <div class="mcp-endpoint-url">${info.url}</div>
                                    <button class="copy-button" onclick="copyToClipboard('${info.url}')">Copy</button>
                                </div>
                            `,
                                )
                                .join("")}
                        </div>

                        <h4>Test with MCP Inspector:</h4>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px; font-size: 0.9rem; overflow-x: auto; position: relative;">npx @modelcontextprotocol/inspector ${endpoint.url}<button class="copy-button" style="position: absolute; top: 0.5rem; right: 0.5rem;" onclick="copyToClipboard('npx @modelcontextprotocol/inspector ${endpoint.url}')">Copy</button></pre>

                        <h4>Claude Desktop Configuration:</h4>
                        <pre style="background: #f8f9fa; padding: 1rem; border-radius: 4px; font-size: 0.9rem; overflow-x: auto; position: relative;">{
  "mcpServers": {
    "sky-nexus-airports": {
      "url": "http://127.0.0.1:8000/mcp/airports"
    },
    "sky-nexus-flights": {
      "url": "http://127.0.0.1:8000/mcp/flights"
    },
    "sky-nexus-satellites": {
      "url": "http://127.0.0.1:8000/mcp/satellites"
    },
    "sky-nexus-datetime": {
      "url": "http://127.0.0.1:8000/mcp/datetime"
    },
    "sky-nexus-babel": {
      "url": "http://127.0.0.1:8000/mcp/babel"
    }
  }
}<button class="copy-button" style="position: absolute; top: 0.5rem; right: 0.5rem;" onclick="copyToClipboard('{\n  \"mcpServers\": {\n    \"sky-nexus-airports\": {\n      \"url\": \"http://127.0.0.1:9093/mcp/airports\"\n    },\n    \"sky-nexus-flights\": {\n      \"url\": \"http://127.0.0.1:9093/mcp/flights\"\n    },\n    \"sky-nexus-satellites\": {\n      \"url\": \"http://127.0.0.1:9093/mcp/satellites\"\n    },\n    \"sky-nexus-datetime\": {\n      \"url\": \"http://127.0.0.1:9093/mcp/datetime\"\n    },\n    \"sky-nexus-babel\": {\n      \"url\": \"http://127.0.0.1:9093/mcp/babel\"\n    }\n  }\n}')">Copy</button></pre>

                        <h4>Available Tools by Endpoint:</h4>
                        <ul style="text-align: left; margin: 1rem 0;">
                            ${Object.entries(mcpEndpoints)
                                .map(
                                    ([name, info]) => `
                                <li><strong>${name}:</strong> ${info.tools.join(", ")}</li>
                            `,
                                )
                                .join("")}
                        </ul>
                    </div>
                </div>
            `;
            }

            function refreshPreview() {
                if (currentUrl) {
                    showPreview(
                        currentUrl,
                        document.getElementById("preview-title").textContent,
                    );
                }
            }

            function openExternal() {
                if (currentUrl) {
                    window.open(currentUrl, "_blank");
                } else {
                    // For MCP info, open the main Sky Nexus page
                    window.open("/swagger-ui", "_blank");
                }
            }
        </script>
    </body>
</html>
